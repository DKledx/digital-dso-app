📅 Ngày 14 – 12/06/2025  
🔹 Hành động chính:
- Middleware tạo `request_id`
- Gắn vào `request.state` để dùng xuyên suốt luồng
- Logger chuẩn cho toàn hệ thống
- Response có header `X-Request-ID`

**Vấn đề gặp phải:**
- Lỗi 500 Internal Server Error khi gọi API `/initiative` do response trả về thiếu trường so với schema `InitiativeCreateResponse`.
- Logger có thể gây lỗi nếu không truyền đủ thông tin `request_id`.
- Middleware RequestID cần kiểm tra kỹ để đảm bảo mỗi request đều sinh và gắn đúng `request_id`.

**Cách khắc phục:**
- Đã sửa hàm `execute` trong `CreateInitiativeUseCase` trả về đầy đủ các trường: `id`, `name`, `description`, `quarter`, `owner_unit`, `expected_outcome` đúng như schema yêu cầu.
- Đảm bảo mọi log sử dụng logger đều truyền `extra={"request_id": ...}` để tránh lỗi khi ghi log.
- Kiểm tra lại middleware và xác nhận header `X-Request-ID` xuất hiện trong mọi response.
- Sau khi sửa, API trả về đúng dữ liệu, status 201, log và request_id hoạt động chuẩn.

🔸 Ghi chú:
- Logging không có `request_id` rất khó debug ở production
- Tách middleware giúp code gọn, dễ mở rộng (ex: tracing, auth, timing...)

🔧 Ý tưởng mở rộng:
- Tích hợp `request_id` với Sentry hoặc logtail
- Gắn `request_id` vào context SQL log, email, message queue
